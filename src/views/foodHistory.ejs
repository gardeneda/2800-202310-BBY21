<!DOCTYPE html>
<html lang="en">
	<head>
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1"
			charset="utf-8"
		/>
		<title>Log In</title>
		<link rel="icon" type="image/x-icon" href="/img/sugaraide-favicon.png">
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
			crossorigin="anonymous"
		/>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
			crossorigin="anonymous"
		></script>
		<!-- Font Awesome Script Connected to Isaiah's Account -->
		<script
			src="https://kit.fontawesome.com/36e5d26d04.js"
			crossorigin="anonymous"
		></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<title>My chart.js chart</title>
		<link rel="stylesheet" href="/css/global.css" />
	</head>
	
	<body>
		<!--temp css-->
		<div class="container mx-auto" style="margin-top: 75px">
			<select id="chart-type">
				<option value="calories">Calories (kcal)</option>
				<option value="sugar">Sugar (g)</option>
			</select>
			<canvas id="myChart"></canvas>
		</div>

		<script>

			const days = <%- JSON.stringify(days) %>;

			const ctx = document.getElementById('myChart').getContext('2d');

			const caloriesData = days.map(dayInfo => dayInfo.calories);
			const labels = days.map(dayInfo => dayInfo.day);

			new Chart(ctx, {
				type: 'bar',
				data: {
					labels: [
						"Sunday",
						"Monday",
						"Tuesday",
						"Wednesday",
						"Thursday",
						"Friday",
						"Saturday",
					],  // Use days of the week as labels
					datasets: [{
						label: 'Calories',
						data: caloriesData,
						backgroundColor: 'rgba(255, 99, 132, 0.2)',
						borderColor: 'rgba(255, 99, 132, 1)',
						borderWidth: 1
					}]
				},
				options: {
					scales: {
						y: {
							beginAtZero: true
						}
					}
				}
			});
			let myChart = document.getElementById("myChart").getContext("2d");
			
			// Placeholder Charts-------------------------------------------------------
			
			// let foodChart = new Chart(myChart, {
			// 	type: "bar",
			// 	data: {
			// 		//bar labels
			// 		labels: [
			// 			"Sunday",
			// 			"Monday",
			// 			"Tuesday",
			// 			"Wednesday",
			// 			"Thursday",
			// 			"Friday",
			// 			"Saturday",
			// 		],
			// 		datasets: [
			// 			{
			// 				label: "Calories",
			// 				//bars; values to be visually displayed
			// 				data: [2650, 2050, 2200, 1850, 1850, 2750, 2350],
			// 				//bar colour (array for individual bars)
			// 				backgroundColor: ["rgba(54, 162, 235, 0.8)"],
			// 			},
			// 		],
			// 	},
			// });
			// //resizes chart based on display size
			// window.addEventListener("resize", function () {
			// 	foodChart.resize();
			// });
			// // event listener for dropdown menu
			// document
			// 	.getElementById("chart-type")
			// 	.addEventListener("change", function () {
			// 		let selectedOption = document.getElementById("chart-type").value;
			// 		if (selectedOption === "calories") {
			// 			foodChart.data.datasets[0].label = "Calories";
			// 			foodChart.data.datasets[0].data = [
			// 				2650, 2050, 2200, 1850, 1850, 2750, 2350,
			// 			];
			// 			foodChart.data.datasets[0].backgroundColor = [
			// 				"rgba(54, 162, 235, 0.8)",
			// 			];
			// 		} else if (selectedOption === "sugar") {
			// 			foodChart.data.datasets[0].label = "Sugar";
			// 			foodChart.data.datasets[0].data = [50, 35, 20, 40, 30, 25, 60];
			// 			foodChart.data.datasets[0].backgroundColor = [
			// 				"rgba(255, 99, 132, 0.8)",
			// 			];
			// 		} else if (selectedOption === "protein") {
			// 			foodChart.data.datasets[0].label = "Protein";
			// 			foodChart.data.datasets[0].data = [33, 67, 45, 33, 87, 53, 39];
			// 			foodChart.data.datasets[0].backgroundColor = [
			// 				"rgba(255, 99, 132, 0.8)",
			// 			];
			// 		}
			// 		foodChart.update();
			// 	});

			// Fetch nutrition data from the server.-------------------------------------------------------
			// fetch("/foodHistory/nutritionLog")
			// .then(response => response.json())
			// .then(nutritionData => {
			// 	// Initialize chart with nutrition data.
			// 	let foodChart = new Chart(myChart, {
			// 	type: "bar",
			// 	data: {
			// 		labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
			// 		datasets: [
			// 		{
			// 			label: "Calories",
			// 			data: nutritionData.calories, // calories is an array with values for each day of the week
			// 			backgroundColor: ["rgba(54, 162, 235, 0.8)"],
			// 		},
			// 		],
			// 	},
			// 	});
			
			// 	// Update chart with new nutrition data when the dropdown changes.
			// 	document
			// 	.getElementById("chart-type")
			// 	.addEventListener("change", function () {
			// 		let selectedOption = document.getElementById("chart-type").value;
			// 		if (selectedOption === "calories") {
			// 		foodChart.data.datasets[0].label = "calories";
			// 		foodChart.data.datasets[0].data = nutritionData.calories;
			// 		foodChart.data.datasets[0].backgroundColor = ["rgba(54, 162, 235, 0.8)"];
			// 		} else if (selectedOption === "sugar") {
			// 		foodChart.data.datasets[0].label = "Sugar";
			// 		foodChart.data.datasets[0].data = nutritionData.sugar;
			// 		foodChart.data.datasets[0].backgroundColor = ["rgba(255, 99, 132, 0.8)"];
			// 		} else if (selectedOption === "protein") {
			// 		foodChart.data.datasets[0].label = "Protein";
			// 		foodChart.data.datasets[0].data = nutritionData.protein;
			// 		foodChart.data.datasets[0].backgroundColor = ["rgba(255, 206, 86, 0.8)"];
			// 		}
			// 		foodChart.update();
			// 	});
			// });
		</script>
	</body>
</html>
